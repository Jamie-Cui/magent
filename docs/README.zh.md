# Magent 文档

本目录包含 Magent 的完整设计文档，Magent 是一个 Emacs AI 编程智能体。

## 文档索引

### [架构](architecture.zh.md)
高层系统架构和设计决策。

**内容：**
- 系统架构概览与层次图
- 核心组件及其职责
- 系统中的数据流
- 设计决策及其理由
- 扩展点和未来增强
- 性能考虑

**适合阅读者：** 想要从高层次理解 Magent 工作原理，或计划扩展、修改系统的人。

### [智能体系统](agent-system.zh.md)
深入探讨多智能体架构。

**内容：**
- 智能体类型（主智能体、子智能体、内部智能体）
- 内置智能体描述
- 智能体数据结构
- 权限系统详解
- 自定义智能体创建指南
- 智能体生命周期和通信
- 最佳实践和故障排除

**适合阅读者：** 想要创建自定义智能体、理解权限工作原理或修改智能体行为的人。

### [LLM 集成](api-integration.zh.md)
通过 gptel 的 LLM 提供商集成指南。

**内容：**
- 支持的提供商（Anthropic、OpenAI、Ollama 等，通过 gptel）
- 通过 gptel 进行配置
- 每个智能体的模型/温度覆盖
- Magent 如何使用 gptel（请求流程、工具注册、回调）
- 日志记录和调试
- 成本优化策略

**适合阅读者：** 正在配置 LLM 提供商、排查连接问题或理解 Magent 如何与 gptel 集成的人。

### [工具](tools.zh.md)
可用工具的完整参考。

**内容：**
- 工具描述和参数
- 使用示例和模式
- 实现细节
- 安全考虑
- 性能特征
- 工具组合和最佳实践
- 扩展工具系统

**适合阅读者：** 想要了解智能体可以使用哪些工具、如何有效使用它们或如何创建新工具的人。

### [会话管理](session-management.zh.md)
对话状态和历史管理指南。

**内容：**
- 会话结构和生命周期
- 消息格式和存储
- 历史管理和修剪
- 会话持久化
- 上下文大小管理
- 多会话考虑
- 最佳实践和故障排除

**适合阅读者：** 正在处理对话状态、实现会话功能或调试历史问题的人。

## 快速参考

### 对于用户

**入门指南：**
1. 阅读主 [README.md](../README.md) 了解安装和基本用法
2. 查看[智能体系统](agent-system.zh.md)了解可用的智能体
3. 查看[工具](tools.zh.md)了解可用的操作

**常见任务：**
- 创建自定义智能体 → [智能体系统 - 自定义智能体](agent-system.zh.md#自定义智能体)
- 配置 LLM 提供商 → [LLM 集成 - 配置](api-integration.zh.md#配置)
- 管理对话历史 → [会话管理](session-management.zh.md)

### 对于开发者

**架构概览：**
1. 从[架构](architecture.zh.md)开始了解全局
2. 阅读[智能体系统](agent-system.zh.md)了解智能体循环
3. 查看[LLM 集成](api-integration.zh.md)了解 gptel 集成细节

**常见开发任务：**
- 添加新工具 → [工具 - 扩展工具](tools.zh.md#扩展工具)
- 添加内置智能体 → [智能体系统 - 智能体类型](agent-system.zh.md#智能体类型)
- 支持新提供商 → 通过 gptel 后端配置（参见 [LLM 集成](api-integration.zh.md#配置)）

## 文档约定

### 代码示例

Emacs Lisp 代码示例：
```elisp
(magent-session-get)
```

Shell 命令：
```bash
make compile
```

JSON 结构：
```json
{
  "key": "value"
}
```

### 交叉引用

文档内部分的链接：
- 同一文档：`[章节名称](#章节名称)`
- 其他文档：`[文档 - 章节](document.zh.md#章节)`

### 术语

- **智能体（Agent）**：具有特定能力和权限的 AI 助手
- **会话（Session）**：带有消息历史的对话上下文
- **工具（Tool）**：智能体可以调用的用于与系统交互的函数
- **权限（Permission）**：工具的访问控制规则
- **提供商（Provider）**：LLM API 服务（Anthropic、OpenAI 等）

## 贡献文档

添加或更新文档时：

1. **准确性**：确保信息与当前实现匹配
2. **示例**：包含实用的代码示例
3. **清晰度**：面向新手和有经验的用户写作
4. **完整性**：涵盖常见用例和边界情况
5. **维护性**：代码更改时更新文档

### 文档结构

每个文档应包含：
- **概述**：主题的简要总结
- **核心概念**：关键思想和术语
- **详细参考**：完整的 API 或功能文档
- **示例**：实际使用示例
- **最佳实践**：推荐的模式
- **故障排除**：常见问题和解决方案

## 获取帮助

如果文档没有回答你的问题：

1. **查看源代码**：实现是权威的
2. **搜索问题**：查找相关的 GitHub 问题
3. **提问**：创建 GitHub issue
4. **贡献**：为他人改进文档

## 文档待办事项

未来的文档改进：

- [ ] 交互式命令的 UI/UX 指南
- [ ] 包含所有选项的配置参考
- [ ] 运行/编写测试的测试指南
- [ ] 开发者贡献指南
- [ ] 常见问题故障排除指南
- [ ] 从其他工具迁移的指南
- [ ] 性能调优指南
- [ ] 安全最佳实践
- [ ] 示例工作流和用例
- [ ] 视频教程或截屏

## 许可证

本文档是 Magent 项目的一部分，采用 GNU 通用公共许可证 v3.0 授权。
